<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>PAYDAY 연말정산 WorkHub</title>
    <!-- Font Awesome for Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-papmdZjNgjEie3syXkRbr9Y3OJ1kWcVdxF3MBZBTyhY14FDnY5zEvQf3/yzgJ7Xw9P+e8X8VwxK81cJVby45og=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      /* Pretendard Font Import */
      @font-face {
        font-family: "Pretendard";
        src: url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.woff2")
            format("woff2"),
          url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.woff")
            format("woff");
        font-weight: 400;
        font-style: normal;
        font-display: swap;
      }

      /* Google Fonts Import for Nanum Gothic and Noto Sans KR */
      @import url("https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&family=Noto+Sans+KR:wght@400;500;700&display=swap");

      /* Reset default styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Pretendard", "Noto Sans KR", "Segoe UI", Tahoma, Geneva,
          Verdana, sans-serif;
        background: linear-gradient(135deg, #f0f4f8, #d9e2ec);
        color: #333;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Login Screen */
      #login-screen {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-image: url("https://images.unsplash.com/photo-1521791055366-0d553872125f?auto=format&fit=crop&w=1950&q=80");
        background-size: cover;
        background-position: center;
        position: relative;
        animation: fadeInBackground 1.5s ease-in-out;
      }

      /* Overlay for better readability */
      #login-screen::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1;
        animation: overlayFadeIn 1.5s ease-in-out;
      }

      #login-box {
        position: relative;
        z-index: 2;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 12px;
        padding: 60px 40px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        text-align: center;
        width: 380px;
        max-width: 90%;
        animation: popIn 0.8s ease-out;
      }

      #login-box h2 {
        margin-bottom: 30px;
        font-size: 24px;
        color: #0071e3;
        word-wrap: break-word;
        animation: slideDown 1s ease-out;
      }

      #login-box input[type="password"] {
        width: 100%;
        padding: 14px 20px;
        margin-bottom: 25px;
        border: none;
        border-radius: 30px;
        background-color: #f0f4f8;
        font-size: 16px;
        transition: background-color 0.3s, box-shadow 0.3s;
        animation: fadeInInput 1s ease-in;
      }

      #login-box input[type="password"]:focus {
        background-color: #e6f0ff;
        box-shadow: 0 0 5px rgba(0, 113, 227, 0.5);
        outline: none;
      }

      #login-box button {
        width: 100%;
        padding: 14px;
        border: none;
        border-radius: 8px;
        background-color: #0071e3;
        color: #fff;
        font-size: 18px;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.2s;
        position: relative;
        overflow: hidden;
      }

      #login-box button::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 300%;
        height: 300%;
        background: rgba(255, 255, 255, 0.15);
        transform: translate(-50%, -50%) rotate(45deg);
        opacity: 0;
        transition: opacity 0.3s;
      }

      #login-box button:hover::after {
        opacity: 1;
      }

      #login-box button:hover {
        background-color: #005bb5;
        transform: translateY(-2px);
      }

      #login-error {
        color: #ff4d4f;
        margin-top: 15px;
        font-size: 14px;
        display: none;
        animation: fadeInMessage 0.5s ease-in;
      }

      #lockout-message {
        color: #ff4d4f;
        margin-top: 15px;
        font-size: 14px;
        display: none;
        animation: fadeInMessage 0.5s ease-in;
      }

      /* "내용" textarea의 폰트 일치 */
      #post-content {
        font-family: "Pretendard", "Noto Sans KR", "Segoe UI", Tahoma, Geneva,
          Verdana, sans-serif;
      }

      #post-content::placeholder {
        font-family: "Pretendard", "Noto Sans KR", "Segoe UI", Tahoma, Geneva,
          Verdana, sans-serif;
      }

      /* Header */
      header {
        background-color: #ffffff;
        padding: 20px 20px;
        border-bottom: 1px solid #ddd;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 1000;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        animation: slideDownHeader 0.5s ease-out;
      }

      header h1 {
        font-size: 24px;
        color: #0071e3;
        cursor: pointer;
        user-select: none; /* Prevent text selection on click */
        transition: color 0.3s;
      }

      header h1:hover {
        color: #005bb5;
      }

      /* Search Bar */
      #search-bar {
        position: relative;
        width: 300px;
        max-width: 80%;
      }

      #search-bar input {
        width: 100%;
        padding: 10px 40px 10px 15px;
        border: 1px solid #ccc;
        border-radius: 25px;
        font-size: 16px;
        transition: border-color 0.3s, box-shadow 0.3s;
      }

      #search-bar input:focus {
        border-color: #0071e3;
        box-shadow: 0 0 5px rgba(0, 113, 227, 0.5);
        outline: none;
      }

      #search-bar button {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        border: none;
        background: none;
        cursor: pointer;
        font-size: 18px;
        color: #0071e3;
        transition: color 0.3s;
      }

      #search-bar button:hover {
        color: #005bb5;
      }

      /* Container */
      .container {
        display: flex;
        flex: 1;
        padding: 0;
        background-color: #f5f5f7;
        gap: 0; /* 변경: 메뉴바와 메인 간격 제거 */
        flex-direction: row;
        justify-content: center;
        align-items: stretch; /* 높이 일치를 위해 */
        /* margin-top: 10px; */ /* 변경: 헤더와 메인 사이 간격 제거 */
        animation: fadeInContainer 1s ease-in;
      }

      /* Navigation */
      nav {
        width: 150px;
        background-color: #ffffff;
        /* border-radius: 12px; */ /* 제거: 메뉴바 각진 형태 */
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        position: sticky;
        top: 100px;
        /* transition: transform 0.3s; */ /* 변경: 메뉴바 확장 제거 */
        margin-left: 0;
        font-family: "Nanum Gothic", sans-serif; /* 변경: 메뉴바 폰트 */
        animation: slideInNav 0.5s ease-out;
      }

      /* nav:hover {
              transform: scale(1.05);
          } */ /* 변경: 메뉴바 확장 제거 */

      nav ul {
        list-style: none;
      }

      nav ul li {
        border-bottom: 1px solid #eee;
      }

      nav ul li:last-child {
        border-bottom: none;
      }

      nav ul li a {
        display: block;
        padding: 12px 15px;
        text-decoration: none;
        color: #333;
        font-size: 16px;
        transition: background-color 0.3s, color 0.3s;
      }

      nav ul li a:hover {
        background-color: #0071e3;
        color: #fff;
      }

      /* Main Content Area */
      main {
        flex: 1;
        background-color: #ffffff;
        padding: 10px;
        border-radius: 0px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        font-family: "Noto Sans KR", sans-serif; /* 변경: 게시판 폰트 */
        animation: fadeInMain 1s ease-in;
      }

      /* Sections */
      .section {
        display: none;
        flex: 1;
      }

      .section.active {
        display: block;
        flex: 1;
        animation: fadeInSection 0.5s ease-in;
      }

      .section h2 {
        margin-bottom: 10px; /* 변경: 제목과 게시판 간 간격 조정 */
        color: #0071e3;
        border-bottom: 2px solid #0071e3;
        padding-bottom: 8px;
        font-size: 24px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      /* Welcome Section */
      #welcome {
        display: none;
        text-align: center;
        padding: 20px;
        flex: 1;
        animation: fadeInWelcome 1s ease-in;
      }

      #welcome.active {
        display: block;
        flex: 1;
      }

      #welcome h2 {
        font-size: 28px;
        color: #0071e3;
        margin-bottom: 10px;
        animation: bounceIn 1s ease-out;
      }

      #welcome p {
        font-size: 18px;
        color: #555;
        margin-bottom: 20px;
        animation: fadeInText 1s ease-in;
      }

      /* Start of Selection */
      // Start of Selection
      #welcome img {
        width: 60%; /* 너비를 75%에서 60%로 줄임 */
        max-width: 800px; /* 최대 너비를 900px에서 800px로 줄임 */
        height: auto; /* 높이를 자동으로 조정하여 비율 유지 */
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s, box-shadow 0.3s;
      }

      /* Posts */
      .posts {
        flex: 1;
        padding-top: 10px; /* 변경: 게시글 약간 아래로 이동 */
        /* border-radius: 12px; */ /* 제거: 게시판 각진 형태 */
      }

      .posts p {
        font-size: 16px;
        color: #777;
        text-align: center;
        margin-top: 20px;
      }

      .post {
        border-bottom: 1px solid #ddd;
        padding: 10px 0;
        cursor: pointer;
        display: flex; /* 수직 정렬을 위해 flex 사용 */
        align-items: center; /* 텍스트 수직 가운데 정렬 */
        justify-content: space-between; /* 제목과 액션 버튼 분리 */
        transition: background-color 0.3s;
      }

      .post:hover {
        background-color: #f0f8ff;
      }

      .post:last-child {
        border-bottom: none;
      }

      /* 수정된 .post-title 스타일 */
      .post-title {
        display: flex;
        align-items: center;
        width: 100%;
        /* justify-content: space-between; */ /* 제거하여 유연한 배치 가능 */
      }

      .post-number {
        font-size: 12px;
        color: #888;
        margin-left: 10px; /* 왼쪽 여백 추가 */
        margin-right: 15px; /* 오른쪽 여백 3배 증가 */
      }

      .post-title-text {
        font-size: 16px;
        color: #333;
        margin-right: 10px; /* 제목과 날짜 간 여백 */
        flex-grow: 1; /* 제목이 가능한 공간을 차지 */
      }

      .post-details {
        font-size: 12px;
        color: #888;
        margin-right: 10px; /* 수정/삭제 버튼과의 간격 */
      }

      .post-actions {
        display: flex;
        align-items: center;
        gap: 10px;
        /* padding-left: 10px; */ /* 변경: 버튼을 조금 왼쪽으로 당김 */
      }

      .post-actions button {
        background: none;
        border: none;
        color: #0071e3;
        cursor: pointer;
        font-size: 16px;
        display: flex;
        align-items: center;
        transition: color 0.3s;
      }

      .post-actions button:hover {
        color: #005bb5;
      }

      .post-actions button i {
        pointer-events: none; /* 아이콘 클릭 시 버튼 클릭으로 처리 */
      }

      .post-content {
        font-size: 18px;
        margin-top: 10px;
        line-height: 1.6;
        display: none;
      }

      /* Write Post Button (Admin and User) */
      #write-post-button {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #0071e3;
        color: #fff;
        border: none;
        border-radius: 50%;
        width: 60px; /* 크기 증가 */
        height: 60px; /* 크기 증가 */
        font-size: 24px; /* 아이콘 크기 조정 */
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        display: none;
        align-items: center;
        justify-content: center;
        transition: background-color 0.3s, transform 0.2s;
        z-index: 1003; /* 추가: 다른 요소 위에 표시 */
        animation: floatButton 2s infinite;
      }

      #write-post-button i {
        /* Ensure the "+" icon is visible and properly styled */
        color: #fff;
        font-size: 24px; /* Adjust icon size if necessary */
      }

      #write-post-button:hover {
        background-color: #005bb5;
        transform: translateY(-2px);
      }

      /* Write Post Modal */
      #write-post-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1002;
        animation: fadeInModal 0.5s ease-in;
      }

      #write-post-modal .modal-content {
        background-color: #fff;
        padding: 40px 50px;
        border-radius: 15px;
        width: 90%;
        max-width: 800px;
        height: 90%;
        max-height: 90%;
        overflow-y: auto;
        position: relative;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        animation: slideUpModal 0.5s ease-out;
      }

      #write-post-modal .modal-content h2 {
        margin-bottom: 30px;
        color: #0071e3;
        font-size: 32px;
        text-align: center;
      }

      #write-post-modal .modal-content button#close-write-post {
        position: absolute;
        top: 20px;
        right: 25px;
        background: none;
        border: none;
        font-size: 36px;
        color: #aaa;
        cursor: pointer;
        transition: color 0.3s;
      }

      #write-post-modal .modal-content button#close-write-post:hover {
        color: #0071e3;
      }

      #write-post-modal .modal-content select,
      #write-post-modal .modal-content input[type="text"],
      #write-post-modal .modal-content textarea {
        width: 100%;
        padding: 15px 20px;
        margin-bottom: 20px;
        border: 2px solid #ccc;
        border-radius: 10px;
        font-size: 18px;
        transition: border-color 0.3s, box-shadow 0.3s;
        appearance: none;
        background-color: #fff;
      }

      #write-post-modal .modal-content select:focus,
      #write-post-modal .modal-content input[type="text"]:focus,
      #write-post-modal .modal-content textarea:focus {
        border-color: #0071e3;
        box-shadow: 0 0 8px rgba(0, 113, 227, 0.4);
        outline: none;
      }

      #write-post-modal .modal-content textarea {
        height: 400px;
        resize: vertical;
      }

      #write-post-modal .modal-content button#submit-post {
        padding: 15px 30px;
        border: none;
        background-color: #0071e3;
        color: #fff;
        border-radius: 8px;
        cursor: pointer;
        font-size: 20px;
        transition: background-color 0.3s, transform 0.2s;
        display: block;
        margin: 20px auto 0;
      }

      #write-post-modal .modal-content button#submit-post:hover {
        background-color: #005bb5;
        transform: translateY(-3px);
      }

      /* Footer */
      footer {
        background-color: #ffffff;
        padding: 10px 20px;
        text-align: center;
        border-top: 1px solid #ddd;
        font-size: 14px;
        color: #555;
        position: relative;
        animation: slideUpFooter 0.5s ease-out;
      }

      /* Modal Styles */
      #search-modal,
      #post-modal,
      #comment-modal,
      #board-search-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1001;
        animation: fadeInModal 0.5s ease-in;
      }

      #search-modal .modal-content,
      #post-modal .modal-content,
      #comment-modal .modal-content,
      #board-search-modal .modal-content {
        background-color: #fff;
        padding: 30px 40px;
        border-radius: 12px;
        width: 80%;
        max-width: 700px;
        max-height: 80%;
        overflow-y: auto;
        position: relative;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        animation: slideUpModal 0.5s ease-out;
      }

      #search-modal .modal-content h2,
      #post-modal .modal-content h2,
      #comment-modal .modal-content h2,
      #board-search-modal .modal-content h2 {
        margin-bottom: 20px;
        color: #0071e3;
        font-size: 24px;
      }

      #search-modal .modal-content button#close-modal,
      #post-modal .modal-content button#close-post-modal,
      #comment-modal .modal-content button#close-comment-modal,
      #board-search-modal .modal-content button#close-board-search-modal {
        position: absolute;
        top: 15px;
        right: 20px;
        background: none;
        border: none;
        font-size: 28px;
        color: #aaa;
        cursor: pointer;
        transition: color 0.3s;
      }

      #search-modal .modal-content button#close-modal:hover,
      #post-modal .modal-content button#close-post-modal:hover,
      #comment-modal .modal-content button#close-comment-modal:hover,
      #board-search-modal .modal-content button#close-board-search-modal:hover {
        color: #0071e3;
      }

      #search-modal .modal-content .result,
      #post-modal .modal-content .post-body,
      #comment-modal .modal-content .comments-section,
      #board-search-modal .modal-content .board-search-results {
        margin-bottom: 20px;
      }

      #search-modal .modal-content .result h3,
      #post-modal .modal-content .post-title,
      #comment-modal .modal-content .comments-title,
      #board-search-modal .modal-content .board-search-title {
        font-size: 20px;
        color: #0071e3;
        margin-bottom: 5px;
      }

      #search-modal .modal-content .result p,
      #post-modal .modal-content .post-body p,
      #comment-modal .modal-content .comment-body,
      #board-search-modal .modal-content .board-search-body p {
        font-size: 16px;
        line-height: 1.6;
        color: #555;
      }

      /* 기존 스타일 유지 */

      /* 검색 입력과 버튼을 가로로 배치하는 스타일 추가 */
      #board-search-modal .modal-content .search-controls {
        display: flex;
        align-items: center;
        gap: 10px; /* 입력과 버튼 사이 간격 조정 */
        margin-bottom: 20px; /* 필요한 경우 하단 여백 추가 */
      }

      #board-search-modal .modal-content #board-search-input {
        width: 70%; /* 입력 필드의 너비 조정 */
        padding: 12px 15px; /* 기존 패딩 유지 */
        border: 2px solid #0071e3;
        border-radius: 8px;
        font-size: 16px;
        outline: none;
        transition: border-color 0.3s, box-shadow 0.3s;
        background-color: #f0f8ff;
        box-sizing: border-box;
      }

      #board-search-modal .modal-content #board-search-input:focus {
        border-color: #005bb5;
        box-shadow: 0 0 8px rgba(0, 113, 227, 0.4);
      }

      #board-search-modal .modal-content #board-search-button {
        width: 25%; /* 버튼의 너비 조정 */
        padding: 10px 20px;
        margin-top: 0; /* 상단 여백 제거 */
        background-color: #0071e3;
        color: #fff;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.2s;
        display: inline-block;
        vertical-align: middle;
      }

      #board-search-modal .modal-content #board-search-button:hover {
        background-color: #005bb5;
        transform: translateY(-2px);
      }

      /* Comments Section */
      .comments-section {
        margin-top: 20px;
      }

      .comments-section h3 {
        margin-bottom: 10px;
        color: #0071e3;
        font-size: 20px;
      }

      .comment {
        border-bottom: 1px solid #ddd;
        padding: 10px 0;
      }

      .comment:last-child {
        border-bottom: none;
      }

      .comment .comment-author {
        font-size: 14px;
        color: #0071e3;
        margin-bottom: 5px;
      }

      .comment .comment-content {
        font-size: 16px;
        color: #555;
      }

      .add-comment {
        display: flex;
        flex-direction: column;
        margin-top: 15px;
      }

      .add-comment textarea {
        resize: vertical;
        height: 80px;
        padding: 10px;
        font-size: 16px;
        border: 1px solid #ccc;
        border-radius: 8px;
        margin-bottom: 10px;
        outline: none;
        transition: border-color 0.3s, box-shadow 0.3s;
      }

      .add-comment textarea:focus {
        border-color: #0071e3;
        box-shadow: 0 0 5px rgba(0, 113, 227, 0.3);
      }

      .add-comment button {
        align-self: flex-end;
        padding: 8px 16px;
        background-color: #0071e3;
        color: #fff;
        border: none;
        border-radius: 20px;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .add-comment button:hover {
        background-color: #005bb5;
      }

      /* Pagination Styles */
      .pagination {
        display: flex;
        justify-content: center;
        margin-top: 20px;
        gap: 5px;
      }

      .pagination button {
        padding: 8px 12px;
        border: 1px solid #ccc;
        background-color: #fff;
        color: #333;
        cursor: pointer;
        border-radius: 4px;
        transition: background-color 0.3s, color 0.3s;
      }

      .pagination button.active {
        background-color: #0071e3;
        color: #fff;
        border-color: #0071e3;
      }

      .pagination button:hover:not(.active) {
        background-color: #f0f0f0;
      }

      /* Keyword Search Button */
      .keyword-search-button {
        background-color: #0071e3;
        color: #fff;
        border: none;
        border-radius: 8px;
        padding: 6px 12px;
        cursor: pointer;
        font-size: 14px;
        transition: background-color 0.3s;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      }

      .keyword-search-button:hover {
        background-color: #005bb5;
      }

      /* Responsive */
      @media (max-width: 1200px) {
        .container {
          flex-direction: row;
        }
      }

      @media (max-width: 1000px) {
        header {
          flex-direction: column;
          align-items: flex-start;
        }

        #search-bar {
          width: 100%;
          margin-top: 15px;
        }

        .container {
          flex-direction: column;
          padding: 0 20px;
        }

        nav {
          width: 100%;
          margin: 0 0 20px 0;
        }

        main {
          max-height: none;
        }
      }

      @media (max-width: 800px) {
        nav {
          display: none;
        }

        main {
          padding: 10px;
        }
      }

      /* 추가된 애니메이션 */
      @keyframes fadeInBackground {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes overlayFadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 0.5;
        }
      }

      @keyframes popIn {
        from {
          transform: scale(0.8);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes slideDown {
        from {
          transform: translateY(-20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes fadeInInput {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fadeInMessage {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes slideDownHeader {
        from {
          transform: translateY(-50px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes fadeInContainer {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes slideInNav {
        from {
          transform: translateX(-20px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes fadeInMain {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fadeInSection {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fadeInWelcome {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes bounceIn {
        0% {
          transform: scale(0.8);
          opacity: 0;
        }
        60% {
          transform: scale(1.05);
          opacity: 1;
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes fadeInText {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes floatButton {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      @keyframes fadeInModal {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes slideUpModal {
        from {
          transform: translateY(50px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes slideUpFooter {
        from {
          transform: translateY(20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      #board-search-modal .modal-content #board-search-input {
        width: 70%; /* 길이 줄이기 */
        padding: 12px 15px; /* 패딩 조정 */
        border: 2px solid #0071e3;
        border-radius: 10px; /* Radius 줄이기 */
        font-size: 16px;
        outline: none;
        transition: border-color 0.3s, box-shadow 0.3s;
        background-color: #f0f8ff;
        box-sizing: border-box;
      }

      #board-search-modal .modal-content #board-search-input:focus {
        border-color: #005bb5;
        box-shadow: 0 0 8px rgba(0, 113, 227, 0.4);
      }

      #board-search-modal .modal-content #board-search-button {
        padding: 10px 20px;
        margin-top: 0; /* 상단 여백 제거 */
        background-color: #0071e3;
        color: #fff;
        border: none;
        border-radius: 15px; /* Radius 줄이기 */
        font-size: 16px;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.2s;
        margin-left: 5%; /* 입력창과 버튼 사이 간격 조정 */
        width: 25%; /* 버튼 너비 조정 */
        display: inline-block;
        vertical-align: middle;
      }

      #board-search-modal .modal-content #board-search-button:hover {
        background-color: #005bb5;
        transform: translateY(-2px);
      }

      #board-search-modal .modal-content #back-board-search-results {
        padding: 10px 20px;
        margin-top: 20px; /* 상단 여백 증가 */
        background-color: #0071e3;
        color: #fff;
        border: none;
        border-radius: 25px;
        font-size: 16px;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.2s;
        float: right; /* 오른쪽 정렬 */
      }

      #board-search-modal .modal-content #back-board-search-results:hover {
        background-color: #005bb5;
        transform: translateY(-2px);
      }

      #board-search-modal .modal-content #board-search-results {
        margin-top: 20px; /* 위와의 간격 증가 */
      }

      #board-search-modal .modal-content #board-search-results h3,
      #board-search-modal .modal-content #board-search-results p {
        margin-bottom: 10px; /* h3와 p 간 간격 증가 */
      }

      #board-search-modal .modal-content #board-search-results p {
        margin-top: 5px; /* 추가 간격 */
      }

      /* Ensure 검색결과가 input박스 하단에 위치하도록 */
      #board-search-modal .modal-content h2.board-search-title {
        margin-bottom: 15px;
      }
    </style>
  </head>
  <body>
    <!-- Login Screen -->
    <div id="login-screen">
      <div id="login-box">
        <h2>Payday WorkHub</h2>
        <input
          type="password"
          id="password-input"
          placeholder="비밀번호를 입력하세요"
        />
        <button id="login-button" type="button">접속</button>
        <p id="login-error">잘못된 비밀번호입니다.</p>
        <p id="lockout-message">
          5회 이상 잘못된 시도로 인해 로그인할 수 없습니다.
        </p>
      </div>
    </div>

    <!-- Main Content -->
    <div
      id="main-content"
      style="display: none; flex: 1; flex-direction: column"
    >
      <!-- Header -->
      <header>
        <h1 id="header-title">PAYDAY 연말정산</h1>
        <div id="search-bar">
          <input type="text" id="search-input" placeholder="통합검색" />
          <button id="search-button" type="button">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </header>

      <!-- Container -->
      <div class="container">
        <!-- Navigation -->
        <nav>
          <ul>
            <li><a href="#" data-section="notices">공지사항</a></li>
            <li><a href="#" data-section="tax-search">세법</a></li>
            <li><a href="#" data-section="review-tax-search">검토법</a></li>
            <li><a href="#" data-section="faq">지식 공유 FAQ</a></li>
            <li><a href="#" data-section="seat-map">좌석표</a></li>
            <li><a href="#" data-section="links">링크</a></li>
          </ul>
        </nav>

        <!-- Main Content Area -->
        <main>
          <!-- Welcome Section -->
          <div id="welcome" class="section active">
            <h2>(주)월급날 WorkHub에 오신 것을 환영합니다.</h2>
            <h3>Workhub에 오신 것을 진심으로 환영합니다.</h3>
            <div>
              업무에 필요한 정보를 서로 쉽게 공유하고자 만들어진 페이지입니다.
            </div>
            <img
              src="https://media.marketrealist.com/brand-img/1DZ6opU6M/0x0/gusto-happy-payday-1632749976515.jpg"
              alt="Welcome Image"
              style="margin-top: 20px"
            />
          </div>

          <!-- Sections -->
          <div id="notices" class="section">
            <h2>공지사항</h2>
            <div class="posts" id="notices-posts"></div>
            <p id="notices-empty" style="display: none">
              게시판에 글이 없습니다.
            </p>
            <div class="pagination" id="notices-pagination"></div>
          </div>

          <div id="tax-search" class="section">
            <h2>
              세법
              <button
                class="keyword-search-button"
                onclick="openBoardSearch('tax-search')"
              >
                키워드 검색
              </button>
            </h2>
            <div class="posts" id="tax-search-posts"></div>
            <p id="tax-search-empty" style="display: none">
              게시판에 글이 없습니다.
            </p>
            <div class="pagination" id="tax-search-pagination"></div>
          </div>

          <div id="review-tax-search" class="section">
            <h2>
              검토법
              <button
                class="keyword-search-button"
                onclick="openBoardSearch('review-tax-search')"
              >
                키워드 검색
              </button>
            </h2>
            <div class="posts" id="review-tax-search-posts"></div>
            <p id="review-tax-search-empty" style="display: none">
              게시판에 글이 없습니다.
            </p>
            <div class="pagination" id="review-tax-search-pagination"></div>
          </div>

          <div id="faq" class="section">
            <h2>지식 공유 FAQ</h2>
            <div class="posts" id="faq-posts"></div>
            <p id="faq-empty" style="display: none">게시판에 글이 없습니다.</p>
            <div class="pagination" id="faq-pagination"></div>
          </div>

          <div id="seat-map" class="section">
            <h2>좌석표</h2>
            <!-- 좌석표 내용 -->
            <p>좌석표 내용이 여기에 표시됩니다.</p>
          </div>

          <div id="links" class="section">
            <h2>링크</h2>
            <!-- 링크 내용 -->
            <p>유용한 링크 모음입니다.</p>
          </div>
        </main>
      </div>

      <!-- Footer -->
      <footer>
        이 시스템은 (주)월급날의 소유이며, 허가 없이 접근할 시 처벌될 수
        있습니다.
      </footer>
    </div>

    <!-- Write Post Button (Admin and User) -->
    <button id="write-post-button" type="button">
      <i class="fas fa-plus">+</i>
    </button>

    <!-- Write Post Modal -->
    <div id="write-post-modal">
      <div class="modal-content">
        <button id="close-write-post" type="button">&times;</button>
        <h2 id="modal-title">게시글 작성</h2>
        <select id="post-section">
          <option value="">게시판 선택</option>
          <option value="notices">공지사항</option>
          <option value="tax-search">세법</option>
          <option value="review-tax-search">검토법</option>
          <option value="faq">지식 공유 FAQ</option>
        </select>
        <input type="text" id="post-title" placeholder="제목" />
        <textarea id="post-content" placeholder="내용"></textarea>
        <button id="submit-post" type="button">게시</button>
      </div>
    </div>

    <!-- Search Modal -->
    <div id="search-modal">
      <div class="modal-content">
        <button id="close-modal" type="button">&times;</button>
        <h2>검색 결과</h2>
        <div id="search-results"></div>
        <button
          id="back-search-results"
          type="button"
          style="display: none; margin-top: 20px"
        >
          뒤로가기
        </button>
      </div>
    </div>

    <!-- Post Modal -->
    <div id="post-modal">
      <div class="modal-content">
        <button id="close-post-modal" type="button">&times;</button>
        <h2 class="post-title"></h2>
        <div class="post-body"></div>
        <div class="comments-section">
          <h3>댓글</h3>
          <div id="comments-list"></div>
          <div class="add-comment">
            <textarea
              id="comment-input"
              placeholder="댓글을 작성하세요"
            ></textarea>
            <button id="add-comment-button" type="button">댓글 추가</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Board Search Modal -->
    <div id="board-search-modal">
      <div class="modal-content">
        <button id="close-board-search-modal" type="button">&times;</button>
        <h2 class="board-search-title">게시판 키워드 검색</h2>
        <!-- 수정된 부분: 검색 입력과 버튼을 감싸는 컨테이너 추가 -->
        <div class="search-controls">
          <input
            type="text"
            id="board-search-input"
            placeholder="검색어를 입력하세요."
          />
          <button id="board-search-button" type="button">검색</button>
        </div>
        <div id="board-search-results"></div>
        <button
          id="back-board-search-results"
          type="button"
          style="display: none; margin-top: 20px"
        >
          뒤로가기
        </button>
      </div>
    </div>

    <script>
      // User Roles
      const USER_PASSWORD = "240915";
      const ADMIN_PASSWORD = "941201";
      let userRole = null; // 'user' or 'admin'

      // Login Attempt Counter
      let loginAttempts = 0;
      const MAX_ATTEMPTS = 5;

      // Handle Login
      document
        .getElementById("login-button")
        .addEventListener("click", function () {
          const input = document.getElementById("password-input").value.trim();
          if (input === USER_PASSWORD) {
            userRole = "user";
            showMainContent();
          } else if (input === ADMIN_PASSWORD) {
            userRole = "admin";
            showMainContent();
          } else {
            loginAttempts++;
            if (loginAttempts >= MAX_ATTEMPTS) {
              document.getElementById("login-button").disabled = true;
              document.getElementById("lockout-message").style.display =
                "block";
              document.getElementById("login-error").style.display = "none";
            } else {
              document.getElementById("login-error").style.display = "block";
              document.getElementById("lockout-message").style.display = "none";
            }
          }
          document.getElementById("password-input").value = "";
        });

      // Allow Enter key to submit
      document
        .getElementById("password-input")
        .addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            document.getElementById("login-button").click();
          }
        });

      function showMainContent() {
        document.getElementById("login-screen").style.display = "none";
        document.getElementById("main-content").style.display = "flex";
        // Show the welcome section by default
        showWelcome();
        // Show write post button if admin or user (for FAQ)
        if (userRole === "admin" || userRole === "user") {
          document.getElementById("write-post-button").style.display = "flex";
        }
      }

      // Navigation Handling
      const navLinks = document.querySelectorAll("nav ul li a");
      navLinks.forEach((link) => {
        link.addEventListener("click", function (e) {
          e.preventDefault();
          const section = this.getAttribute("data-section");
          showSection(section);
        });
      });

      // Add Click Listener to Header Title
      document
        .getElementById("header-title")
        .addEventListener("click", function () {
          showWelcome();
        });

      // Posts Data Structure
      const postsData = {
        notices: [],
        "tax-search": [],
        "review-tax-search": [],
        faq: [],
      };

      // Pagination Data Structure
      const paginationData = {
        notices: 1,
        "tax-search": 1,
        "review-tax-search": 1,
        faq: 1,
      };

      const POSTS_PER_PAGE = 10;

      // Variable to track current edit
      let currentEdit = {
        section: null,
        index: null,
      };

      // Variable to track current post in modal
      let currentPost = null;

      // Function to Render Posts with Pagination
      function renderPosts(section) {
        const postsContainer = document.getElementById(`${section}-posts`);
        const emptyMessage = document.getElementById(`${section}-empty`);
        const paginationContainer = document.getElementById(
          `${section}-pagination`
        );
        postsContainer.innerHTML = "";
        paginationContainer.innerHTML = "";

        if (postsData[section].length === 0) {
          emptyMessage.style.display = "block";
          return;
        } else {
          emptyMessage.style.display = "none";
        }

        // Sort posts by timestamp descending
        const sortedPosts = postsData[section].sort(
          (a, b) => b.timestamp - a.timestamp
        );

        // Calculate total pages
        const totalPages = Math.ceil(sortedPosts.length / POSTS_PER_PAGE);
        const currentPage = paginationData[section];

        // Get posts for current page
        const startIndex = (currentPage - 1) * POSTS_PER_PAGE;
        const endIndex = startIndex + POSTS_PER_PAGE;
        const postsToDisplay = sortedPosts.slice(startIndex, endIndex);

        // Render posts
        postsToDisplay.forEach((post, index) => {
          const actualIndex = startIndex + index;
          const postDiv = document.createElement("div");
          postDiv.className = "post";

          const postTitleDiv = document.createElement("div");
          postTitleDiv.className = "post-title";

          // 글번호
          const postNumber = document.createElement("span");
          postNumber.className = "post-number";
          postNumber.textContent = `#${
            postsData[section].length - actualIndex
          }`;
          postTitleDiv.appendChild(postNumber);

          // 제목
          const titleSpan = document.createElement("span");
          titleSpan.className = "post-title-text";
          titleSpan.textContent = post.title;
          postTitleDiv.appendChild(titleSpan);

          // 상세 정보 (날짜)
          const postDetails = document.createElement("span");
          postDetails.className = "post-details";
          postDetails.textContent = post.date;
          postTitleDiv.appendChild(postDetails);

          // 액션 버튼
          if (userRole === "admin") {
            const postActionsDiv = document.createElement("div");
            postActionsDiv.className = "post-actions";

            const editButton = document.createElement("button");
            editButton.type = "button";
            editButton.innerHTML = '<i class="fas fa-edit"></i>';
            editButton.title = "수정";
            editButton.addEventListener("click", function (e) {
              e.stopPropagation();
              openEditModal(section, actualIndex);
            });

            const deleteButton = document.createElement("button");
            deleteButton.type = "button";
            deleteButton.innerHTML = '<i class="fas fa-trash"></i>';
            deleteButton.title = "삭제";
            deleteButton.addEventListener("click", function (e) {
              e.stopPropagation();
              deletePost(section, actualIndex);
            });

            postActionsDiv.appendChild(editButton);
            postActionsDiv.appendChild(deleteButton);

            postTitleDiv.appendChild(postActionsDiv);
          }

          postDiv.appendChild(postTitleDiv);

          postDiv.addEventListener("click", function () {
            openPostModal(section, actualIndex);
          });

          postsContainer.appendChild(postDiv);
        });

        // Render Pagination if needed
        if (totalPages > 1) {
          for (let i = 1; i <= totalPages; i++) {
            const pageButton = document.createElement("button");
            pageButton.textContent = i;
            if (i === currentPage) {
              pageButton.classList.add("active");
            }
            pageButton.addEventListener("click", function () {
              paginationData[section] = i;
              renderPosts(section);
            });
            paginationContainer.appendChild(pageButton);
          }

          // Add '>' button for next page if not on last page
          if (currentPage < totalPages) {
            const nextButton = document.createElement("button");
            nextButton.textContent = ">";
            nextButton.addEventListener("click", function () {
              paginationData[section]++;
              renderPosts(section);
            });
            paginationContainer.appendChild(nextButton);
          }
        }
      }

      function showSection(sectionId) {
        // 모든 섹션 숨기기
        const sections = document.querySelectorAll(".section");
        sections.forEach((sec) => {
          sec.classList.remove("active");
        });
        // 선택된 섹션 표시
        const section = document.getElementById(sectionId);
        if (section) {
          section.classList.add("active");
          // 환영 섹션이 아직 숨겨지지 않았다면 숨기기
          document.getElementById("welcome").classList.remove("active");
          if (postsData.hasOwnProperty(sectionId)) {
            renderPosts(sectionId);
          }
        }
        // 글쓰기 버튼 표시 여부 업데이트
        updateWritePostButtonVisibility(sectionId);
      }

      function updateWritePostButtonVisibility(sectionId) {
        const writePostButton = document.getElementById("write-post-button");
        if (userRole === "admin") {
          if (
            sectionId !== "welcome" &&
            sectionId !== "seat-map" &&
            sectionId !== "links"
          ) {
            writePostButton.style.display = "flex";
          } else {
            writePostButton.style.display = "none";
          }
        } else if (userRole === "user") {
          if (sectionId === "faq") {
            writePostButton.style.display = "flex";
          } else {
            writePostButton.style.display = "none";
          }
        }
      }

      function showWelcome() {
        // 모든 섹션 숨기기
        const sections = document.querySelectorAll(".section");
        sections.forEach((sec) => {
          sec.classList.remove("active");
        });
        // 환영 섹션 표시
        const welcomeSection = document.getElementById("welcome");
        if (welcomeSection) {
          welcomeSection.classList.add("active");
        }
        // 글쓰기 버튼 숨기기
        document.getElementById("write-post-button").style.display = "none";
      }

      // Write Post Button Handling
      const writePostButton = document.getElementById("write-post-button");
      const writePostModal = document.getElementById("write-post-modal");
      const closeWritePost = document.getElementById("close-write-post");
      const submitPostButton = document.getElementById("submit-post");

      writePostButton.addEventListener("click", function () {
        writePostModal.style.display = "flex";
        document.getElementById("modal-title").textContent =
          userRole === "admin" ? "게시글 작성" : "게시글 작성 (FAQ만 가능)";
        document.getElementById("post-section").value =
          userRole === "admin" ? "" : "faq";
        document.getElementById("post-section").disabled = userRole !== "admin";
        document.getElementById("post-title").value = "";
        document.getElementById("post-content").value = "";
        currentEdit.section = null;
        currentEdit.index = null;
      });

      closeWritePost.addEventListener("click", function () {
        writePostModal.style.display = "none";
        clearWritePostModal();
      });

      // Submit Post
      submitPostButton.addEventListener("click", function () {
        const sectionSelect = document.getElementById("post-section");
        const sectionId = sectionSelect.value;
        const title = document.getElementById("post-title").value.trim();
        const content = document.getElementById("post-content").value.trim();
        if (sectionId === "") {
          alert("게시판을 선택해주세요.");
          return;
        }
        if (title === "" || content === "") {
          alert("제목과 내용을 모두 입력해주세요.");
          return;
        }
        const now = new Date();
        const formattedDate = `${now.getFullYear()}-${String(
          now.getMonth() + 1
        ).padStart(2, "0")}-${String(now.getDate()).padStart(2, "0")} ${String(
          now.getHours()
        ).padStart(2, "0")}:${String(now.getMinutes()).padStart(2, "0")}`;

        if (currentEdit.section !== null && currentEdit.index !== null) {
          // 수정 모드
          const post = postsData[currentEdit.section][currentEdit.index];
          post.title = title;
          post.content = content;
          post.date = formattedDate;
          alert("게시글이 수정되었습니다.");
          currentEdit.section = null;
          currentEdit.index = null;
        } else {
          // 작성 모드
          const post = {
            title: title,
            content: content,
            timestamp: Date.now(),
            date: formattedDate,
            comments: [],
          };
          // 디버깅을 위해 콘솔에 추가된 게시글 확인
          console.log(`Adding post to section "${sectionId}":`, post);
          postsData[sectionId].push(post);
        }

        writePostModal.style.display = "none";
        clearWritePostModal();
        // 게시글 추가 후 해당 섹션을 보여주고 렌더링합니다.
        showSection(sectionId);
      });

      function clearWritePostModal() {
        document.getElementById("post-section").value = "";
        document.getElementById("post-title").value = "";
        document.getElementById("post-content").value = "";
      }

      // Get Section Name
      function getSectionName(sectionId) {
        const sectionNames = {
          notices: "공지사항",
          "tax-search": "세법",
          "review-tax-search": "검토법",
          faq: "지식 공유 FAQ",
        };
        return sectionNames[sectionId] || "";
      }

      // Edit Post
      function openEditModal(section, index) {
        const post = postsData[section][index];
        writePostModal.style.display = "flex";
        document.getElementById("modal-title").textContent = "게시글 수정";
        document.getElementById("post-section").value = section;
        document.getElementById("post-section").disabled = true;
        document.getElementById("post-title").value = post.title;
        document.getElementById("post-content").value = post.content;
        currentEdit.section = section;
        currentEdit.index = index;
      }

      // Delete Post
      function deletePost(section, index) {
        if (confirm("정말 이 게시글을 삭제하시겠습니까?")) {
          postsData[section].splice(index, 1);
          renderPosts(section);
        }
      }

      // Search Functionality
      document
        .getElementById("search-button")
        .addEventListener("click", function () {
          const query = document
            .getElementById("search-input")
            .value.trim()
            .toLowerCase();
          if (query === "") {
            alert("검색어를 입력해주세요.");
            return;
          }
          const results = [];
          for (const section in postsData) {
            postsData[section].forEach((post, index) => {
              if (
                post.title.toLowerCase().includes(query) ||
                post.content.toLowerCase().includes(query)
              ) {
                results.push({
                  section: section,
                  title: post.title,
                  content: post.content,
                  index: index,
                });
              }
            });
          }
          displaySearchResults(results);
        });

      document
        .getElementById("search-input")
        .addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            document.getElementById("search-button").click();
          }
        });

      function displaySearchResults(results) {
        const modal = document.getElementById("search-modal");
        const resultsContainer = document.getElementById("search-results");
        const backButton = document.getElementById("back-search-results");
        resultsContainer.innerHTML = "";
        backButton.style.display = "none";

        if (results.length === 0) {
          resultsContainer.innerHTML = "<p>검색 결과가 없습니다.</p>";
        } else {
          results.forEach((result) => {
            const resultDiv = document.createElement("div");
            resultDiv.className = "result";
            const titleButton = document.createElement("button");
            titleButton.style.background = "none";
            titleButton.style.border = "none";
            titleButton.style.color = "#0071e3";
            titleButton.style.cursor = "pointer";
            titleButton.style.fontSize = "18px";
            titleButton.style.textAlign = "left";
            titleButton.style.padding = "5px 0";
            titleButton.innerHTML = `<strong>${
              result.title
            }</strong> <span style="font-size: 14px; color: #555;">(${getSectionName(
              result.section
            )})</span>`;
            titleButton.addEventListener("click", function () {
              showSearchResultContent(result);
            });
            resultDiv.appendChild(titleButton);
            resultsContainer.appendChild(resultDiv);
          });
        }

        modal.style.display = "flex";
      }

      function showSearchResultContent(result) {
        const resultsContainer = document.getElementById("search-results");
        const backButton = document.getElementById("back-search-results");
        resultsContainer.innerHTML = `
                <h3>${result.title}</h3>
                <p>${result.content}</p>
            `;
        backButton.style.display = "block";

        backButton.onclick = function () {
          // Re-display the list of results
          const currentQuery = document
            .getElementById("search-input")
            .value.trim()
            .toLowerCase();
          const filteredResults = [];
          for (const section in postsData) {
            postsData[section].forEach((post, index) => {
              if (
                post.title.toLowerCase().includes(currentQuery) ||
                post.content.toLowerCase().includes(currentQuery)
              ) {
                filteredResults.push({
                  section: section,
                  title: post.title,
                  content: post.content,
                  index: index,
                });
              }
            });
          }
          displaySearchResults(filteredResults);
        };
      }

      // Close Search Modal
      document
        .getElementById("close-modal")
        .addEventListener("click", function () {
          document.getElementById("search-modal").style.display = "none";
        });

      // Post Modal
      function openPostModal(section, index) {
        const post = postsData[section][index];
        currentPost = { section: section, index: index };
        const modal = document.getElementById("post-modal");
        modal.querySelector(".post-title").textContent = post.title;
        modal.querySelector(".post-body").innerHTML = `<p>${post.content}</p>`;
        renderComments(post.comments);
        modal.style.display = "flex";
      }

      document
        .getElementById("close-post-modal")
        .addEventListener("click", function () {
          document.getElementById("post-modal").style.display = "none";
          currentPost = null;
        });

      // Comments Functionality
      function renderComments(comments) {
        const commentsList = document.getElementById("comments-list");
        commentsList.innerHTML = "";
        if (comments.length === 0) {
          commentsList.innerHTML = "<p>댓글이 없습니다.</p>";
          return;
        }
        comments.forEach((comment) => {
          const commentDiv = document.createElement("div");
          commentDiv.className = "comment";
          commentDiv.innerHTML = `
                    <div class="comment-author">${comment.author}</div>
                    <div class="comment-content">${comment.content}</div>
                `;
          commentsList.appendChild(commentDiv);
        });
      }

      document
        .getElementById("add-comment-button")
        .addEventListener("click", function () {
          const commentInput = document
            .getElementById("comment-input")
            .value.trim();
          if (commentInput === "") {
            alert("댓글을 입력해주세요.");
            return;
          }
          if (!currentPost) {
            alert("현재 선택된 게시글이 없습니다.");
            return;
          }
          const comment = {
            author: userRole === "admin" ? "관리자" : "일반 사용자",
            content: commentInput,
          };
          postsData[currentPost.section][currentPost.index].comments.push(
            comment
          );
          document.getElementById("comment-input").value = "";
          renderComments(
            postsData[currentPost.section][currentPost.index].comments
          );
        });

      // Initialize by showing the first section if already logged in
      window.onload = function () {
        if (userRole) {
          // If already logged in (e.g., via back button), ensure main content is shown
          showMainContent();
        }
      };

      // Allow Enter key to add comment
      document
        .getElementById("comment-input")
        .addEventListener("keypress", function (e) {
          if (e.key === "Enter" && !e.shiftKey) {
            e.preventDefault();
            document.getElementById("add-comment-button").click();
          }
        });

      // Allow Enter key to submit post
      document
        .getElementById("post-content")
        .addEventListener("keypress", function (e) {
          if (e.key === "Enter" && e.ctrlKey) {
            document.getElementById("submit-post").click();
          }
        });

      // Board Specific Search Functionality
      function openBoardSearch(sectionId) {
        const modal = document.getElementById("board-search-modal");
        const resultsContainer = document.getElementById(
          "board-search-results"
        );
        const backButton = document.getElementById("back-board-search-results");
        modal.setAttribute("data-section", sectionId);
        document.querySelector(
          ".board-search-title"
        ).textContent = `${getSectionName(sectionId)} 게시판 키워드 검색`;
        resultsContainer.innerHTML = "";
        backButton.style.display = "none";
        modal.style.display = "flex";
      }

      document
        .getElementById("close-board-search-modal")
        .addEventListener("click", function () {
          document.getElementById("board-search-modal").style.display = "none";
        });

      document
        .getElementById("board-search-button")
        .addEventListener("click", function () {
          const modal = document.getElementById("board-search-modal");
          const sectionId = modal.getAttribute("data-section");
          const query = document
            .getElementById("board-search-input")
            .value.trim()
            .toLowerCase();
          if (query === "") {
            alert("검색어를 입력해주세요.");
            return;
          }
          const results = [];
          postsData[sectionId].forEach((post, index) => {
            if (
              post.title.toLowerCase().includes(query) ||
              post.content.toLowerCase().includes(query)
            ) {
              results.push({
                title: post.title,
                content: post.content,
                index: index,
              });
            }
          });
          displayBoardSearchResults(results, sectionId);
        });

      function displayBoardSearchResults(results, sectionId) {
        const resultsContainer = document.getElementById(
          "board-search-results"
        );
        const backButton = document.getElementById("back-board-search-results");
        resultsContainer.innerHTML = "";
        backButton.style.display = "none";

        if (results.length === 0) {
          resultsContainer.innerHTML = "<p>검색 결과가 없습니다.</p>";
        } else {
          results.forEach((result) => {
            const resultDiv = document.createElement("div");
            resultDiv.className = "result";
            const titleButton = document.createElement("button");
            titleButton.style.background = "none";
            titleButton.style.border = "none";
            titleButton.style.color = "#0071e3";
            titleButton.style.cursor = "pointer";
            titleButton.style.fontSize = "18px";
            titleButton.style.textAlign = "left";
            titleButton.style.padding = "5px 0";
            titleButton.innerHTML = `<strong>${result.title}</strong>`;
            titleButton.addEventListener("click", function () {
              showBoardSearchResultContent(result, sectionId);
            });
            resultDiv.appendChild(titleButton);
            resultsContainer.appendChild(resultDiv);
          });
        }
      }

      function showBoardSearchResultContent(result, sectionId) {
        const resultsContainer = document.getElementById(
          "board-search-results"
        );
        const backButton = document.getElementById("back-board-search-results");
        resultsContainer.innerHTML = `
                <h3>${result.title}</h3>
                <p>${result.content}</p>
            `;
        backButton.style.display = "block";

        backButton.onclick = function () {
          // Re-display the list of results
          const currentQuery = document
            .getElementById("board-search-input")
            .value.trim()
            .toLowerCase();
          const sectionId = document
            .getElementById("board-search-modal")
            .getAttribute("data-section");
          const filteredResults = [];
          postsData[sectionId].forEach((post, index) => {
            if (
              post.title.toLowerCase().includes(currentQuery) ||
              post.content.toLowerCase().includes(currentQuery)
            ) {
              filteredResults.push({
                title: post.title,
                content: post.content,
                index: index,
              });
            }
          });
          displayBoardSearchResults(filteredResults, sectionId);
        };
      }

      // Close Board Search Modal
      // Ensure there's a close functionality if needed
      // Allow Enter key to submit board search
      document
        .getElementById("board-search-input")
        .addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            document.getElementById("board-search-button").click();
          }
        });
    </script>
  </body>
</html>
